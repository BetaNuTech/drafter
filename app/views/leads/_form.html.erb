<%= form_with(model: lead, local: true) do |form| %>
  <% if lead.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(lead.errors.count, "error") %> prohibited this lead from being saved:</h2>

      <ul>
        <% lead.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="fieldset_content">
    <fieldset>
      <legend>Lead Information</legend>

      <div class="row">
        <div class="col-md-4 form-group">
          <%= form.label 'Lead Source'%><br/>
          <%= form.select :lead_source_id, sources_for_select(@lead.lead_source_id), {}, { class: "form-control" } %>
        </div>
      </div>

      <div class="row">
        <div class="col-md-2 form-group">
          <%= form.label :title %><br/>
          <%= form.select :title, titles_for_select(@lead.title), { include_blank: true }, { id: :lead_title, class: 'form-control' } %>
        </div>
        <div class="col-md-5 form-group">
          <%= form.label :first_name %>
          <%= form.text_field :first_name, id: :lead_first_name, class: "form-control" %>
        </div>
        <div class="col-md-5 form-group">
          <%= form.label :last_name %>
          <%= form.text_field :last_name, id: :lead_last_name, class: "form-control" %>
        </div>
      </div>

      <div class="form-group">
        <%= form.label :referral %>
        <%= form.text_field :referral, id: :lead_referral, class: "form-control" %>
      </div>

      <div class="form-group">
        <%= form.label :notes %>
        <%= form.text_area :notes, id: :lead_notes, class: "form-control", rows: 6 %>
      </div>

      <div class="row">
        <div class="col-md-6 form-group">
          <%= form.label 'First Communication'  %><br/>
          <%= form.date_select :first_comm, {}, { id: :lead_first_comm, class: "form-control form-control-date-select" } %>
        </div>

        <div class="col-md-6 form-group">
          <%= form.label 'Last Communication'  %><br/>
          <%= form.date_select :last_comm, {}, { id: :lead_last_comm, class: "form-control form-control-date-select" } %>
        </div>
      </div>
    </fieldset>
  </div>

  <%= form.fields_for :preference do |preference_form| %>
    <div class="fieldset_content">
      <fieldset>
        <legend>Preferences</legend>

        <div class="row">
          <div class="col-md-3 form-group">
            <%= preference_form.label 'Minimum sqft.'%><br/>
            <%= preference_form.text_field :min_area, class: 'form-control' %>
          </div>
          <div class="col-md-3 form-group">
            <%= preference_form.label 'Maximum sqft.'%><br/>
            <%= preference_form.text_field :max_area, class: 'form-control' %>
          </div>
        </div>

        <div class="row">
          <div class="col-md-3 form-group">
            <%= preference_form.label 'Minimum Price'%>
            <div class="input-group">
              <div class="input-group-addon">$</div>
              <%= preference_form.text_field :min_price, class: 'form-control' %>
            </div>
          </div>
          <div class="col-md-3 form-group">
            <%= preference_form.label 'Maximum Price'%>
            <div class="input-group">
              <div class="input-group-addon">$</div>
              <%= preference_form.text_field :max_price, class: 'form-control' %>
            </div>
          </div>
        </div>

        <div class="row form-group">
          <div class="col-md-2">
            <%= preference_form.label 'Bathrooms'%><br/>
            <%= preference_form.number_field :baths, step: 0.5, class: 'form-control' %>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6 form-group">
            <%= preference_form.label 'Move In Date' %><br/>
            <%= preference_form.date_select :move_in, {}, { class: 'form-control form-control-date-select' } %>
          </div>
        </div>

        <div class="form-group">
          <h4>Amenities</h4>
          <div class="form-check-label">
            <%= preference_form.check_box :pets, class: 'form-check-input' %>
            Pets Allowed?
          </div>
          <div class="form-check-label">
            <%= preference_form.check_box :smoker, class: 'form-check-input' %>
            Smoking Allowed?
          </div>
          <div class="form-check-label">
            <%= preference_form.check_box :washerdryer, class: 'form-check-input' %>
            Washer/Dryer Connection?
          </div>
        </div>

        <div class="form-group">
          <%= preference_form.label 'Notes' %><br/>
          <%= preference_form.text_area :notes, class: 'form-control', rows: 6 %>
        </div>
      </fieldset>
    </div>
  <% end %>

  <div class="form-group">
    <button type="submit" class="btn btn-primary">Submit</button>
  </div>
<% end %>
