<div class="container">
  <div class="row">
    <div class="col-md-10">
      <div class="row">
        <div class="col-md-6">
        <p class="lead">
          <%= @message_type.name %>
          Message for
          <%= @messageable.name %>
        </p>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <p>
            <span class="btn btn-xs btn-<%= @message.draft? ? 'default' : 'success' %>">
              <%= @message.incoming? ? 'Incoming' : 'Outgoing' %>
            </span>
            <% if @message.failed? %>
              <span class="btn btn-xs btn-danger">Delivery Failed</span>
            <% end %>
            <b> <%= short_datetime(@message.delivered_at) %> </b>
          </p>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <p>
            <span class="btn btn-default">
              <b>From:</b>
              <%= @message.sender_name %>
              (<%= @message.senderid %>)
            </span>
          </p>
          <p>
            <span class="btn btn-default">
              <b>To:</b>
              <%= @message.recipient_name %>
              (<%= @message.recipientid %>)
            </span>
          </p>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12">
          <p>
            <b>Subject:</b>
            <%= @message.subject %>
          </p>
          <p>
            <b>Body</b><br/>
            <iframe id="message_preview" onload="resizeIframe(this)" srcdoc="<%= @message.body_with_layout %>">
          </p>
        </div>
      </div>

      <div class="row">
        <div class="col-md-4">
          <%= link_to(  'Edit', edit_message_path(@message), class: "btn btn-primary" ) if policy(@message).edit? %>
          <%= link_to 'Back', url_for(@message.messageable), class: "btn btn-xs btn-info"%>
        </div>
      </div>

    </div>
  </div>
</div>
